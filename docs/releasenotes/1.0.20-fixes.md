# Galileo Glass UI v1.0.20 - PRD: Planned Fixes

This document outlines the requirements for fixes and updates planned for the `v1.0.20` patch release of the Galileo Glass UI library, based on verifications performed on April 5, 2025, against the v1.0.19 codebase.

---

## 1. Fix: `use3DTransform`: Export `Vector3D` & Clarify Docs

**Goal:** Resolve issues hindering the type-safe usage and clarity of the `use3DTransform` hook.
**Status: Partially Completed**
**Reference:** Bug Report #10

**Requirements:**

*   The internal `Vector3D` type (`{ x: number; y: number; z: number }`) used within `Transform3DState` must be exported to allow users to define state updates type-safely.
*   Documentation must be updated to clarify:
    *   That the `perspective` CSS property should be applied to the parent element of the element using `use3DTransform`.
    *   The exact names of the properties returned by the hook (`elementRef`, `transformState`).

**Files to Update/Create:**

*   `src/index.ts`: Add export for `Vector3D` (or alias).
*   `src/animations/physics/types.ts` (Potentially): Define `Vector3D` here if moved from `use3DTransform.ts`.
*   `src/animations/physics/use3DTransform.ts`: Verify type definition uses exported `Vector3D`.
*   `docs/hooks/use3DTransform.md` (or relevant animation docs): Update documentation regarding `perspective` and return value property names.
*   `examples/animations/DimensionalElementDemo.tsx` (or similar): Update demo to use exported `Vector3D` type if applicable, removing `any`.

**Tasks:**

*   [✅] Decide on the final name and export location for the `Vector3D` type (e.g., export directly, create alias `PhysicsVector3D` in `src/types/physics.ts`?).
*   [✅] Add the chosen type export to `src/index.ts` (and potentially relevant sub-index files).
*   [✅] Update `use3DTransform.ts` if the type definition was moved/renamed.
*   [✅] Update the `use3DTransform` documentation to clarify `perspective` placement.
*   [✅] Update the `use3DTransform` documentation to clearly list `elementRef` and `transformState` in the return value description.
*   [ ] Audit and update the `DimensionalElementDemo.tsx` example (or relevant demos) to import and use the exported `Vector3D` type for state updates.
*   [ ] Verify build includes the new type export.

---

## 2. Fix: `useMagneticElement` Types & `SpringPresetName` Export (and `usePhysicsInteraction` Docs)

**Goal:** Correct type definition issues with `useMagneticElement`, export `SpringPresetName`, and improve `usePhysicsInteraction` documentation.
**Status: Partially Completed**
**Reference:** Bug Report #11 (Derived from #6), Bug Report #8 Update

**Requirements:**

*   The `MagneticElementOptions` type needs review (done, no changes needed).
*   The `SpringPresetName` type needs to be exported.
*   Documentation for `useMagneticElement` needs clarification on style application and `transform` state usage.
*   Documentation for `usePhysicsInteraction` needs updating for `SpringPresetName` type, clearer `bounds` examples, and coverage of both preset and detailed object configuration for `animationConfig`.

**Files to Update/Create:**

*   `src/animations/physics/useMagneticElement.ts`: Review/update `MagneticElementOptions` definition.
*   `src/animations/physics/springPhysics.ts`: Define and export `SpringPresetName` type alias.
*   `src/index.ts`: Add export for `SpringPresetName`.
*   `docs/hooks/useMagneticElement.md` (or relevant physics docs): Add clarification on style application and `transform` state usage.
*   `examples/animations/MagneticElementDemo.tsx`: Update if type changes necessitate demo adjustments.
*   `docs/hooks/physics-interaction.md`: Update `animationConfig` type reference to use exported `SpringPresetName`, add clearer `bounds` examples, document detailed config object.

**Tasks:**

*   [✅] Investigate and determine the intended configuration options for `useMagneticElement`. Update `MagneticElementOptions` accordingly.
*   [✅] Define and export `export type SpringPresetName = keyof typeof SpringPresets;` in `springPhysics.ts`.
*   [✅] Add `SpringPresetName` export to `src/index.ts` (and potentially `src/animations/physics/index.ts`).
*   [✅] Update `useMagneticElement` documentation to explain style application (likely via internal `useMagneticEffect`) and how to use the `transform` state object.
*   [✅] Update `usePhysicsInteraction` documentation to reference the exported `SpringPresetName` type.
*   [✅] Update `usePhysicsInteraction` documentation to document both preset string and detailed object usage for `animationConfig`.
*   [✅] Update `usePhysicsInteraction` documentation to provide clearer examples for the `bounds` prop.
*   [✅] Update `MagneticElementDemo.tsx` if option changes require it. (N/A - Options did not change)
*   [ ] Verify build includes the new type export.

---

## 3. Docs: Create Documentation for `Select`, `MenuItem`, and `Switch`

**Goal:** Provide missing documentation for exported components.
**Status: Partially Completed**
**Reference:** Bug Report #12 (Derived from #8), Bug Report #8 Update

**Requirements:**

*   Create markdown documentation files for the `Select`, `MenuItem`, and `Switch` components.
*   Document all available props for each component, including their types and purpose.
*   Provide clear usage examples.

**Files to Update/Create:**

*   `docs/components/select.md`: Create new documentation file.
*   `docs/components/menu-item.md`: Create new documentation file.
*   `docs/components/switch.md`: Create new documentation file.
*   `examples/components/Select.stories.tsx` (or similar): Ensure examples exist or create them.
*   `examples/components/Switch.stories.tsx` (or similar): Ensure examples exist or create them.
*   `examples/components/GlassMultiSelectDemo.tsx`: Verify correct usage of `itemRemoveAnimation` prop without `any` casting.

**Tasks:**

*   [✅] Review the implementation and props of `src/components/Select/Select.tsx`.
*   [✅] Create `docs/components/select.md`, documenting props (`value`, `onChange`, `label`, etc.) and providing usage examples (basic, controlled, with label, etc.).
*   [✅] Review the implementation and props of `src/components/MenuItem/MenuItem.tsx`.
*   [✅] Create `docs/components/menu-item.md`, documenting props (`value`, `children`, `disabled`, etc.) and explaining its usage context (likely within `Select`).
*   [✅] Review the implementation and props of `src/components/Switch/Switch.tsx`.
*   [✅] Create `docs/components/switch.md`, documenting props and providing usage examples.
*   [✅] Ensure Storybook examples exist for `Select`, `MenuItem`, and `Switch` and are linked/accurate.
*   [✅] Verify and update `GlassMultiSelectDemo.tsx` to ensure correct usage of `itemRemoveAnimation` prop without `any` casting.

---

## 4. Fix: `useAnimationSequence` Types & Theme Context Exports

**Goal:** Resolve type definition issues and missing exports related to `useAnimationSequence` and theme context access.
**Status: Partially Completed**
**Reference:** Bug Report #13 (Derived from #12)

**Requirements:**

*   The `useAnimationSequence` hook's return type (`AnimationSequenceResult`) needs review and potential updates to include useful state properties (e.g., `currentStageId`, explicit `reset`).
*   The hook's configuration type (`AnimationSequenceConfig`) needs review and potential updates for missing options (e.g., `loop`, `onStageChange`).
*   Library exports need to be cleaned up: internal types like `AnimationStage` should not be exported if `PublicAnimationStage` is the intended public API.
*   The primary theme hook (`useGlassTheme`) and its return type (`GlassThemeContextValue`) must be exported to allow type-safe theme access.
*   The role of the currently exported `useTheme` needs clarification if it differs from `useGlassTheme`.
*   Subtle typing issues with the `stages` prop in `useAnimationSequence` require investigation if `any[]` casting is still needed after other fixes.

**Files to Update/Create:**

*   `src/animations/orchestration/useAnimationSequence.ts`: Review/update `AnimationSequenceResult` and `AnimationSequenceConfig` types.
*   `src/index.ts`: Remove internal `AnimationStage` exports; add exports for `useGlassTheme` and `GlassThemeContextValue`.
*   `src/hooks/index.ts`: Add export for `useGlassTheme`.
*   `src/theme/index.ts`: Clarify exported `useTheme` vs internal `useGlassTheme`.
*   `src/core/types.ts` or `src/theme/types.ts`: Ensure `GlassThemeContextValue` is defined appropriately for export.
*   `docs/animations/orchestration.md` (or specific `useAnimationSequence` doc): Update documentation for hook return value and config options.
*   `docs/hooks/useTheme.md` (or similar theming doc): Document `useGlassTheme` and theme structure access.
*   `examples/animations/SequenceAnimationDemo.tsx`: Update demo to use corrected types and remove workarounds.

**Tasks:**

*   [✅] Review `AnimationSequenceResult` and decide which additional state properties (e.g., `currentStageId`, `reset`) are necessary/useful for the public API. Update the type definition.
*   [✅] Review `AnimationSequenceConfig` and decide which additional options (e.g., `loop`, `onStageChange`) should be added. Update the type definition.
*   [✅] Remove the export statements for internal types (`AnimationStage`, `BaseAnimationStage`, etc.) from `src/index.ts` and any relevant sub-index files.
*   [✅] Add export statements for `useGlassTheme` (from `src/hooks/useGlassTheme.ts`) and `GlassThemeContextValue` (from `src/hooks/useGlassTheme.ts` or wherever it's defined) to `src/hooks/index.ts` and `src/index.ts`.
*   [✅] Clarify the purpose of the existing `useTheme` export in `src/theme/index.ts`. If it's an alias or deprecated, update accordingly.
*   [✅] Update documentation for `useAnimationSequence` based on type changes.
*   [✅] Update documentation for theme access, explaining `useGlassTheme` and `GlassThemeContextValue`.
*   [✅] Re-evaluate the `stages` prop typing in `SequenceAnimationDemo.tsx` after other fixes. If `any[]` is still needed, investigate the root cause in the type definitions or conversion logic. (Verified - No `any[]` needed)
*   [✅] Update `SequenceAnimationDemo.tsx` to remove workarounds (`any[]` casting, theme fallbacks). (Verified - No workarounds found)
*   [ ] Verify build includes new exports and removes internal ones.

---

## 5. Fix: `DataChart` Issues & Missing Exports

**Goal:** Address API discrepancies and missing type exports for the `DataChart` component.
**Status: Partially Completed**
**Reference:** Bug Report #13

**Requirements:**

*   Documentation needs to clarify that physics zoom/pan is enabled via `interaction.zoomPanEnabled`.
*   The limitation regarding passing custom Chart.js options needs to be documented, or a feature enhancement provided.
*   Core data types (`DataPoint`, `ChartDataset`) need to be exported.

**Files to Update/Create:**

*   `docs/components/data-chart.md`: Update documentation regarding physics zoom/pan and custom options.
*   `src/index.ts`: Add exports for `DataPoint` and `ChartDataset`.
*   `src/components/DataChart/types/ChartTypes.ts`: Ensure types are exported.
*   `src/components/sections/ChartsSection.tsx`: Update demo to use exported types if applicable.

**Tasks:**

*   [✅] Update `DataChart` documentation to clarify physics zoom/pan is enabled via `interaction.zoomPanEnabled` and configured via `interaction.physics`.
*   [✅] Document the limitation that arbitrary Chart.js options cannot be passed via a `chartOptions` prop (or create feature request).
*   [✅] Export `DataPoint` and `ChartDataset` types from `src/index.ts`.
*   [ ] Audit and update `ChartsSection.tsx` demo to use exported types if applicable.

---

## 6. Fix: Miscellaneous Missing Exports & Docs (`GlassDataGrid`, `useGesturePhysics`)

**Goal:** Address remaining missing type exports and documentation errors identified in older bug reports.
**Status: Completed**
**Reference:** Bug Report #3, Bug Report #6

**Requirements:**

*   Export the `ColumnDefinition` type for `GlassDataGrid`.
*   Remove the incorrect `getRowId` prop documentation for `GlassDataGrid`.
*   Export the `GesturePhysicsOptions` type for `useGesturePhysics`.

**Files to Update/Create:**

*   `src/index.ts`: Add exports for `ColumnDefinition` and `GesturePhysicsOptions`.
*   `src/components/GlassDataGrid/types.ts`: Ensure `ColumnDefinition` is exported.
*   `src/animations/physics/gestures/useGesturePhysics.ts`: Ensure `GesturePhysicsOptions` is exported.
*   `docs/components/glass-data-grid.md`: Remove references to `getRowId`.

**Tasks:**

*   [✅] Export `ColumnDefinition` type from `src/index.ts`.
*   [✅] Remove `getRowId` prop from `glass-data-grid.md` documentation.
*   [✅] Export `GesturePhysicsOptions` type from `src/index.ts`.
*   [ ] Verify build includes new type exports.

--- 